---
layout:     post
title:      索引图像
subtitle:   单通道显示彩色图像
date:       2020-01-21
author:     LZY
header-img: img/xiaohuangren.jpg
catalog: true
tags:
    - 图像处理
    - python
    - 索引图像
---

# 索引图像

> 索引图像是一种把像素值直接作为RGB调色板下标的图像。索引图像可把像素值“直接映射”为调色板数值

索引图像像素点存放的是调色板中的下标，具有颜色不容易失真，存储文件小的优势。

索引图像对于反色，颜色平衡，去色，颜色替代非常方便，直接修改调色板即可。

但是索引图像在滤镜，通道混合，透明叠加，旋转，缩放等通过对指定区域像素操作产生新像素值的的方法效果比较差；这种情况下例如旋转锯齿，其实可以通过从索引图像生成真彩色图像，对真彩色图像变换，然后转换为索引图像保存；用这种思路可以脱离图像格式的限制，得到满意的图像处理结果。

索引图像的实际数据只是对应颜色表中的一个索引，而并不是实际的像素值，这个与灰度图像不同，灰度图像是同样是最多含有256中颜色的图像，但其颜色表的值是从0到255连续的值，所以灰度图像的数据我们即可以看成是实际的像素值，也可以看成是索引值。索引图像的这种特性使得我们在处理的时候，一般不直接操作其索引数据。

总之，索引图像中的最重要的概念就是颜色表，由于这个颜色表的存在，我们有很多功能都不可以实现，比如透明叠加，图像的实现等等，不过由于其颜色的失真较小以及保存后的文件大小比较小等优势，索引图像还是有很大的用处的。

# Python 创建索引图像

语义分割的mask通常是单通道，我们希望彩色显示，就1需要使用`索引图像`，用单通道显示彩色图像

```python
from PIL import Image
from random import randint

a = Image.open("a.png")

# 随机调色板 length是不同颜色种类 min max 0 255
def randomPalette(length, min, max):
    return [randint(min, max) for x in range(length)]

i = randomPalette(10, 0, 255)

a.putpalette(i)
a.save("a_mask.png")

```